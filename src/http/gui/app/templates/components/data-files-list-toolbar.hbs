{{!-- TODO: icons hide when too small size of screen --}}
{{!-- TODO: toolbar icon component --}}
{{#each items as |item|}}
  <li>
    {{!-- TODO refactor --}}
    {{#if item.action}}
      <a id="{{item.id}}" class="top-bar-item toolbar-icon {{if item.disabled 'disabled'}}"
        {{action item.action}}>
        {{icon item.icon 'top-bar-icon'}}
      </a>
    {{else}}
      <a id="{{item.id}}" class="top-bar-item toolbar-icon {{if item.disabled 'disabled'}}">
        {{icon item.icon 'top-bar-icon'}}
      </a>
    {{/if}}
  </li>
{{/each}}


{{!-- Modals for actions --}}
{{!-- TODO: modals should be in separate component or something --}}
{{!-- TODO: there should be a service for opening modals from files-list --}}

{{!-- TODO: form validation (not blank name etc.) --}}
{{!-- TODO: autofocus does not work, because something is stealing focus... --}}

{{!-- RENAME FILE --}}

{{#bs-modal openedAction='renameModalOpened' open=isRenamingFile body=false footer=false
    title=(t "components.dataFilesListToolbar.renameFileModal.title")
    id="rename-file"}}
  {{#bs-modal-body}}
    {{#bs-form action=(action "submitRenameSelectedFile") model=this}}
      {{bs-form-element controlType="text" property="renameFileName" autofocus=true
        label=(t 'components.dataFilesListToolbar.renameFileModal.enterName'
          currentName=dir.singleSelectedFile.name)}}
    {{/bs-form}}
  {{/bs-modal-body}}
  {{#bs-modal-footer as |footer|}}
    {{#bs-button buttonType="submit" type="primary"}}
      {{t "common.modal.ok"}}
    {{/bs-button}}
    {{#bs-button action=(action "close" target=footer) type="default"}}
      {{t "common.modal.cancel"}}
    {{/bs-button}}
  {{/bs-modal-footer}}
{{/bs-modal}}

{{!-- CREATE DIRECTORY --}}

{{#bs-modal open=isCreatingDir body=false footer=false
    title=(t "components.dataFilesListToolbar.createDirModal.title")
    id="create-dir"}}
  {{#bs-modal-body}}
    {{#bs-form action=(action "submitCreateFile" "dir") model=this}}
      {{bs-form-element controlType="text" property="createFileName" autofocus=true
        label=(t 'components.dataFilesListToolbar.createDirModal.enterName')}}
    {{/bs-form}}
  {{/bs-modal-body}}
  {{#bs-modal-footer as |footer|}}
    {{#bs-button buttonType="submit" type="primary"}}
      {{t "common.modal.ok"}}
    {{/bs-button}}
    {{#bs-button action=(action "close" target=footer) type="default"}}
      {{t "common.modal.cancel"}}
    {{/bs-button}}
  {{/bs-modal-footer}}
{{/bs-modal}}

{{!-- CREATE FILE --}}

{{#bs-modal open=isCreatingFile body=false footer=false
    title=(t "components.dataFilesListToolbar.createFileModal.title")
    id="create-file"}}
  {{#bs-modal-body}}
    {{#bs-form action=(action "submitCreateFile" "file") model=this}}
      {{bs-form-element controlType="text" property="createFileName" autofocus=true
        label=(t 'components.dataFilesListToolbar.createFileModal.enterName')}}
    {{/bs-form}}
  {{/bs-modal-body}}
  {{#bs-modal-footer as |footer|}}
    {{#bs-button buttonType="submit" type="primary"}}
      {{t "common.modal.ok"}}
    {{/bs-button}}
    {{#bs-button action=(action "close" target=footer) type="default"}}
      {{t "common.modal.cancel"}}
    {{/bs-button}}
  {{/bs-modal-footer}}
{{/bs-modal}}

{{!-- REMOVE FILE --}}

{{#bs-modal open=isRemovingFiles body=false footer=false
    title=(t "components.dataFilesListToolbar.removeFilesModal.title")
    id="remove-files" submitAction="submitRemoveFiles"}}
  {{#bs-modal-body}}
    {{t "components.dataFilesListToolbar.removeFilesModal.text"}}
  {{/bs-modal-body}}
  {{#bs-modal-footer as |footer|}}
    {{#bs-button buttonType="submit" type="primary"}}
      {{t "common.modal.ok"}}
    {{/bs-button}}
    {{#bs-button action=(action "close" target=footer) type="default"}}
      {{t "common.modal.cancel"}}
    {{/bs-button}}
  {{/bs-modal-footer}}
{{/bs-modal}}

{{!-- EDIT PERMISSIONS --}}

{{#bs-modal open=isEditingPermissions body=false footer=false
    title=(t "components.dataFilesListToolbar.editPermissionsModal.title")
    id="edit-permissions"}}
  {{#bs-modal-body}}
    {{#bs-form action=(action "submitEditPermissions" "dir") model=this}}
      {{bs-form-element controlType="text" property="newPermissions" autofocus=true
        label=(t 'components.dataFilesListToolbar.editPermissionsModal.text')}}
    {{/bs-form}}
  {{/bs-modal-body}}
  {{#bs-modal-footer as |footer|}}
    {{#bs-button buttonType="submit" type="primary"}}
      {{t "common.modal.ok"}}
    {{/bs-button}}
    {{#bs-button action=(action "close" target=footer) type="default"}}
      {{t "common.modal.cancel"}}
    {{/bs-button}}
  {{/bs-modal-footer}}
{{/bs-modal}}

{{!-- NOT IMPLEMENTED --}}

{{#bs-modal open=isNotImplementedModal body=false footer=false
    title="Feature not implemented"
    id="not-implemented"}}
  {{#bs-modal-body}}
    Feature not implemented
  {{/bs-modal-body}}
  {{#bs-modal-footer as |footer|}}
    {{#bs-button action=(action "close" target=footer) type="primary"}}
      {{t "common.modal.ok"}}
    {{/bs-button}}
  {{/bs-modal-footer}}
{{/bs-modal}}
