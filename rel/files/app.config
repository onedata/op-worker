[
    % TODO this is needed to deploy oneprovider on distributed env on dockers
    % Range of ports that will be used by erlang nodes to communicate
    {kernel,[
        {inet_dist_listen_min, 9100},
        {inet_dist_listen_max, 9139}
    ]},

    %% SASL config
    {sasl, [{sasl_error_logger, false}]},

    %% logger configuration
    {lager, [
        {handlers, [
            %% show info level or higher level logs at console
            {lager_console_backend, info},
            %% rotate error log once a month (first day of month, 1 a.m) or when it reaches 1 GB; keep 1000 rotated logs
            {lager_file_backend, [{file, "{{platform_log_dir}}/error.log"}, {level, error}, {size, 1048576000}, {date, "$M1D1"}, {count, 1000}]},
            %% rotate info log once a week (friday at 11 p.m) or when it reaches 100 MB; keep 100 rotated logs
            {lager_file_backend, [{file, "{{platform_log_dir}}/info.log"}, {level, info}, {size, 104857600}, {date, "$W5D23"}, {count, 100}]},
            %% rotate info log once a day (at midnight) or when it reaches 10 MB; keep 10 rotated logs
            {lager_file_backend, [{file, "{{platform_log_dir}}/debug.log"}, {level, debug}, {size, 10485760}, {date, "$D0"}, {count, 10}]}
            %% {central_logging_backend, debug} todo uncomment when logging worker appears
        ]},
        {error_logger_hwm, 200},
        % When lager should change mode to synchronous (log queue is longer than async_threshold)
        {async_threshold, 500},
        % When lager should return from mode to synchronous (log queue is shorter than (async_threshold - async_threshold_window)
        {async_threshold_window, 50}
    ]},

    %% cluster_worker config
    {cluster_worker, [

        %% ===================================================================
        %% PLUGINS
        %% ===================================================================

        % names of modules implementing given plugins
        {datastore_config_plugin, datastore_config_plugin},
        {node_manager_plugin, node_manager_plugin},
        {dns_worker_plugin, dns_worker_plugin}

    ]},

    %% op_worker config
    {op_worker, [
        %% ===================================================================
        %% GENERAL
        %% ===================================================================

        %% List of possible cluster manager nodes - configured automatically by configurator.erl lib, used in GEN_DEV script
        {cm_nodes, ['cm@127.0.0.1']},
        %% List of all DBMS nodes - configured automatically by configurator.erl lib, used in GEN_DEV script
        {db_nodes, ['127.0.0.1:49161']},
        %% Domain of the provider. If provider node names are not in the domain,
        %% the application won't start.
        {provider_domain, "localhost.local"},
        %% Path to certificate used by ranch_ssl in gui handler
        {web_ssl_cert_path, "{{platform_etc_dir}}/certs/onedataServerWeb.pem"},
        %% Path to certificate used by ranch_ssl in fuse clients handler
        {protocol_handler_ssl_cert_path, "{{platform_etc_dir}}/certs/onedataServerFuse.pem"},
        %% Prefix to directory containing NIF libs
        {nif_prefix, "priv"},
        %% Ports used by application, that need to be free before oneprovider node can start
        {ports_in_use, [gui_https_port, gui_redirect_port, dns_port, protocol_handler_port, rest_port]},
        %% Memory usage level above which caches will be cleared
        {mem_to_clear_cache, 80},
        %% The memory will be cleared once a period defined in this variable, even when usage level is acceptable
        {clear_cache_max_period_ms, 86400}, % 1 day
        %% How often node manager checks if caches cleaning is needed
        {check_mem_interval_minutes, 5},
        %% List of beam directories to be covered, cover is not started if list is empty
        {covered_dirs, []},
        %% List of modules to be excluded during cover analysis
        {covered_excluded_modules, []},
        %% Minimal delay in cache dumping to disk (changes done before this time causes cancelation of dump)
        {cache_to_disk_delay_ms, 5000},
        %% Maximal delay in cache dumping to disk
        {cache_to_disk_force_delay_ms, 30000},
        %% Period between checkings of tasks lists (to find tasks without owner)
        {task_checking_period_minutes, 5},
        %% How long task should wait between function calls (when function execution ends with error)
        {task_fail_sleep_time_ms, 1000},


        %% ===================================================================
        %% DISPATCHER
        %% ===================================================================

        %% Number of threads used by dispatcher
        {protocol_handler_pool_size, 100},
        %% Number of port used by dispatcher
        {protocol_handler_port, 5555},
        %% Bind address of protocol handler ('all' = 0.0.0.0, 'loopback' = 127.0.0.1)
        {protocol_handler_bind_addr, loopback},
        %% path to dir containing CA and CRL certs used by GSI handler
        {ca_dir, "{{platform_etc_dir}}/cacerts"},
        %% path to dir containing server certs used by GSI handler
        {certs_dir, "{{platform_etc_dir}}/certs"},
        %% the interval in minutes between CRL updates done by GSI handler
        {crl_update_interval_minutes, 60},

        %% ===================================================================
        %% GUI
        %% ===================================================================

        %% Port on which gui is available
        {gui_https_port, 443},
        %% Port on which standard HTTP will be opened to redirect requests to HTTPS
        {gui_redirect_port, 80},
        %% Directory in release where static gui files are stored
        {gui_static_files_root, "{{platform_data_dir}}/gui_static"},
        %% Number of accepting processes in gui listener
        {gui_number_of_acceptors, 100},
        %% Number of accepting processes on port 80 (redirecting to https)
        {gui_number_of_http_acceptors, 20},
        %% Maximum number of HTTP requests without closing the connection (HTTP/1.1 only)
        {gui_max_keepalive, 30},
        %% Socket timeout in sec
        {gui_socket_timeout_seconds, 60},
        %% GUI cookie TTL in sec
        {gui_cookie_ttl, 3600},

        %% ===================================================================
        %% REST
        %% ===================================================================

        %% Port on which REST API is available
        {rest_port, 8443},
        %% Number of accepting processes in REST listener
        {rest_number_of_acceptors, 100},
        %% Maximum number of HTTP requests without closing the connection (HTTP/1.1 only)
        {rest_max_keepalive, 30},
        %% Socket timeout in sec
        {rest_socket_timeout_seconds, 60},


        %% Time in ms after healthcheck is considered failed
        {nagios_healthcheck_timeout, 5000},
        %% Answers from nagios will be cached for maximum of this time (in ms) and served from cache.
        %% The reason is that a healthcheck can generate a considerable traffic.
        {nagios_caching_time, 500},
        %% Time in ms that must have passed since last update of dispatcher
        %% or DNS to assume they are out of sync.
        {dns_disp_out_of_sync_threshold, 10000},
        
        %% List of protocols which will be available on http_worker_rest_port.
        {protocol_plugins, [rest_protocol_plugin, cdmi_protocol_plugin]},

        %% ===================================================================
        %% CDMI
        %% ===================================================================

        %% Size of download buffer. Currently set to 8MB.
        {download_buffer_size, 8388608},
        %% Maximum amount of directory children that can be requested in one request
        {max_children_per_request, 1000},

        %% ===================================================================
        %% SEQUENCER_MANAGER
        %% ===================================================================

        %% Maximal amount of messages that can be forwarded by sequencer
        %% stream between successive emissions of acknowledgement messages.
        {sequencer_stream_msg_ack_threshold, 100},
        %% Amount of seconds that have to elapse before sending next request
        %% when waiting for missing messages.
        {sequencer_stream_msg_req_short_timeout_seconds, 1},
        %% Amount of seconds that have to elapse before sending next request
        %% when not waiting for missing messages.
        {sequencer_stream_msg_req_long_timeout_seconds, 10},
        %% Amount of seconds that have to elapse before next attempt to send
        %% message by sequencer out stream.
        {sequencer_stream_msg_send_retry_delay_seconds, 5},

        %% ===================================================================
        %% SESSION_WATCHER
        %% ===================================================================

        %% Maximal period of GUI session inactivity before removal
        {gui_session_max_inactivity_period_in_seconds_before_removal, 7200},
        %% Maximal period of FUSE session inactivity before removal
        {fuse_session_max_inactivity_period_in_seconds_before_removal, 300},
        %% Maximal period of REST session inactivity before removal
        {rest_session_max_inactivity_period_in_seconds_before_removal, 3600},

        %% ===================================================================
        %% GLOBAL REGISTRY INTERFACING
        %% ===================================================================

        %% Indicates if GR cert should be verified against system's CA bundle.
        %% If this is set to true and CA bundle cannot be found, provider
        %% application won't start at all.
        {verify_gr_cert, true},
        %% Global Registry hostname
        {global_registry_domain, "onedata.org"},
        %% Global Registry login page (relative to domain)
        {global_registry_login_page, "/login"},
        %% Global Registry logout page (relative to domain)
        {global_registry_logout_page, "/logout"},
        %% Path to .pem file containing the orginal CSR to be signed by GR
        {global_registry_provider_csr_path, "{{platform_etc_dir}}/certs/grpcsr.pem"},
        %% Path to .pem file containing the private key to the grpcert
        {global_registry_provider_key_path, "{{platform_etc_dir}}/certs/grpkey.pem"},
        %% Path to .pem file containing the certificate signed by Global Registry CA, used for authorizing requests to it
        {global_registry_provider_cert_path, "{{platform_etc_dir}}/certs/grpcert.pem"},
        %% Path to .pem file containing the Global Registry CA certificate
        {global_registry_ca_cert_path, "{{platform_etc_dir}}/cacerts/grpCA.pem"},
        %% Global Registry REST API port
        {global_registry_rest_port, 8443},


        %% ===================================================================
        %% FSLOGIC
        %% ===================================================================

        %% User/Group storage ID mapping boundaries
        {lowest_generated_storage_uid, 100000},
        {highest_generated_storage_uid, 2000000},

        %% Write event configuration
        {default_write_event_counter_threshold, 100},
        {default_write_event_time_threshold_miliseconds, 500},
        {default_write_event_size_threshold, 10485760}, %% 10MB

        %% Default values
        {default_dir_mode, 8#775},
        {default_file_mode, 8#664},

        %% Default number of listed children in lfm:get_children_count
        {ls_chunk_size, 100}
    ]}
].

